<button
	id="themeToggle"
	class="w-8 h-8 flex items-center justify-center hover:text-green transition-colors duration-200"
>
	<div id="sun" class="i-uil-sun w-6 h-6 hidden"></div>
	<div id="moon" class="i-uil-moon w-6 h-6"></div>
</button>

<script is:inline>
	const theme = (() => {
		if (
			typeof localStorage !== "undefined" &&
			localStorage.getItem("theme")
		) {
			return localStorage.getItem("theme");
		}
		if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
			return "dark";
		}
		return "light";
	})();

	if (theme === "light") {
		document.documentElement.classList.remove("dark");
		document.getElementById("sun").classList.add("hidden");
		document.getElementById("moon").classList.remove("hidden");
	} else {
		document.documentElement.classList.add("dark");
		document.getElementById("sun").classList.remove("hidden");
		document.getElementById("moon").classList.add("hidden");
	}

	window.localStorage.setItem("theme", theme);

	const handleToggleClick = () => {
		const element = document.documentElement;
		element.classList.toggle("dark");

		const isDark = element.classList.contains("dark");
		localStorage.setItem("theme", isDark ? "dark" : "light");

		// Toggle visibility of sun/moon icons
		document.getElementById("sun").classList.toggle("hidden");
		document.getElementById("moon").classList.toggle("hidden");
	};

	document
		.getElementById("themeToggle")
		.addEventListener("click", handleToggleClick);
</script>
