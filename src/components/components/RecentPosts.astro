---
import { getCollection } from "astro:content";
import PostList from "./PostList.astro";
import Card from "./Card.astro";
import Button from "./Button.astro";

interface Props {
	count?: number;
}

const { count } = Astro.props;

const posts = await getCollection("posts").then((posts) =>
	posts.reverse().slice(0, count ?? 3),
);
---

<section class="mt-8">
	<Card>
		<div
			class="flex justify-between items-start p-4 dark:bg-black rounded-lg"
		>
			<h2
				class:list={[
					"text-2xl md:text-4xl lg:text-6xl mb-8 dm-serif",
					"dark:text-[#FFD35AD9]",
				]}
			>
				Publications RÃ©centes
			</h2>
			<div class="hidden md:block">
				<Button href="/">Retour &rarr;</Button>
			</div>
			<div class="block md:hidden">
				<Button href="/">Retour</Button>
			</div>
		</div>
		<div class="dark:bg-black rounded-lg">
			<PostList posts={posts} />
		</div>
	</Card>
</section>
